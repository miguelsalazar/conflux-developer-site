<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<title data-react-helmet="true">README | Conflux</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="README | Conflux"><meta data-react-helmet="true" name="description" content="Snappy, a fast compressor/decompressor."><meta data-react-helmet="true" property="og:description" content="Snappy, a fast compressor/decompressor."><meta data-react-helmet="true" property="og:url" content="https://developer.conflux-chain.org/docs/conflux-rust/core/benchmark/storage/parity-snappy/rust-snappy/snappy-sys/snappy/README"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://developer.conflux-chain.org/docs/conflux-rust/core/benchmark/storage/parity-snappy/rust-snappy/snappy-sys/snappy/README"><link rel="stylesheet" href="/styles.72ea3a70.css">
<link rel="preload" href="/styles.553bd67d.js" as="script">
<link rel="preload" href="/runtime~main.96399471.js" as="script">
<link rel="preload" href="/main.19d3fa67.js" as="script">
<link rel="preload" href="/1.940cd094.js" as="script">
<link rel="preload" href="/2.c0143057.js" as="script">
<link rel="preload" href="/71.00796953.js" as="script">
<link rel="preload" href="/79.4fccfe13.js" as="script">
<link rel="preload" href="/20ac7829.f718cc52.js" as="script">
<link rel="preload" href="/4f4f5cb7.c9504f76.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Conflux Logo"><strong class="navbar__title">Conflux Developer</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Conflux-Chain/conflux-developer-site" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_KVdu"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_13On moon_3n_g"></span></div><div class="react-toggle-track-x"><span class="toggle_13On sun_UemI"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Conflux Logo"><strong class="navbar__title">Conflux Developer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/Conflux-Chain/conflux-developer-site" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_3T5V"><main class="docMainContainer_2yiU"><div class="container padding-vert--lg docItemWrapper_182k"><div class="row"><div class="col docItemCol_2uRP"><div class="docItemContainer_1gVo"><article><header><h1 class="docTitle_3r6L">README</h1></header><div class="markdown"><p>Snappy, a fast compressor/decompressor.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h1><p>Snappy is a compression/decompression library. It does not aim for maximum
compression, or compatibility with any other compression library; instead,
it aims for very high speeds and reasonable compression. For instance,
compared to the fastest mode of zlib, Snappy is an order of magnitude faster
for most inputs, but the resulting compressed files are anywhere from 20% to
100% bigger. (For more information, see &quot;Performance&quot;, below.)</p><p>Snappy has the following properties:</p><ul><li>Fast: Compression speeds at 250 MB/sec and beyond, with no assembler code.
See &quot;Performance&quot; below.</li><li>Stable: Over the last few years, Snappy has compressed and decompressed
petabytes of data in Google&#x27;s production environment. The Snappy bitstream
format is stable and will not change between versions.</li><li>Robust: The Snappy decompressor is designed not to crash in the face of
corrupted or malicious input.</li><li>Free and open source software: Snappy is licensed under a BSD-type license.
For more information, see the included COPYING file.</li></ul><p>Snappy has previously been called &quot;Zippy&quot; in some Google presentations
and the like.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="performance"></a>Performance<a aria-hidden="true" tabindex="-1" class="hash-link" href="#performance" title="Direct link to heading">#</a></h1><p>Snappy is intended to be fast. On a single core of a Core i7 processor
in 64-bit mode, it compresses at about 250 MB/sec or more and decompresses at
about 500 MB/sec or more. (These numbers are for the slowest inputs in our
benchmark suite; others are much faster.) In our tests, Snappy usually
is faster than algorithms in the same class (e.g. LZO, LZF, QuickLZ,
etc.) while achieving comparable compression ratios.</p><p>Typical compression ratios (based on the benchmark suite) are about 1.5-1.7x
for plain text, about 2-4x for HTML, and of course 1.0x for JPEGs, PNGs and
other already-compressed data. Similar numbers for zlib in its fastest mode
are 2.6-2.8x, 3-7x and 1.0x, respectively. More sophisticated algorithms are
capable of achieving yet higher compression rates, although usually at the
expense of speed. Of course, compression ratio will vary significantly with
the input.</p><p>Although Snappy should be fairly portable, it is primarily optimized
for 64-bit x86-compatible processors, and may run slower in other environments.
In particular:</p><ul><li>Snappy uses 64-bit operations in several places to process more data at
once than would otherwise be possible.</li><li>Snappy assumes unaligned 32- and 64-bit loads and stores are cheap.
On some platforms, these must be emulated with single-byte loads
and stores, which is much slower.</li><li>Snappy assumes little-endian throughout, and needs to byte-swap data in
several places if running on a big-endian platform.</li></ul><p>Experience has shown that even heavily tuned code can be improved.
Performance optimizations, whether for 64-bit x86 or other platforms,
are of course most welcome; see &quot;Contact&quot;, below.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="building"></a>Building<a aria-hidden="true" tabindex="-1" class="hash-link" href="#building" title="Direct link to heading">#</a></h1><p>CMake is supported and autotools will soon be deprecated.
You need CMake 3.4 or above to build:</p><p>  mkdir build
cd build &amp;&amp; cmake ../ &amp;&amp; make</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="usage"></a>Usage<a aria-hidden="true" tabindex="-1" class="hash-link" href="#usage" title="Direct link to heading">#</a></h1><p>Note that Snappy, both the implementation and the main interface,
is written in C++. However, several third-party bindings to other languages
are available; see the home page at <a href="http://google.github.io/snappy/" target="_blank" rel="noopener noreferrer">http://google.github.io/snappy/</a>
for more information. Also, if you want to use Snappy from C code, you can
use the included C bindings in snappy-c.h.</p><p>To use Snappy from your own C++ program, include the file &quot;snappy.h&quot; from
your calling file, and link against the compiled library.</p><p>There are many ways to call Snappy, but the simplest possible is</p><p>  snappy::Compress(input.data(), input.size(), &amp;output);</p><p>and similarly</p><p>  snappy::Uncompress(input.data(), input.size(), &amp;output);</p><p>where &quot;input&quot; and &quot;output&quot; are both instances of std::string.</p><p>There are other interfaces that are more flexible in various ways, including
support for custom (non-array) input sources. See the header file for more
information.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="tests-and-benchmarks"></a>Tests and benchmarks<a aria-hidden="true" tabindex="-1" class="hash-link" href="#tests-and-benchmarks" title="Direct link to heading">#</a></h1><p>When you compile Snappy, snappy_unittest is compiled in addition to the
library itself. You do not need it to use the compressor from your own library,
but it contains several useful components for Snappy development.</p><p>First of all, it contains unit tests, verifying correctness on your machine in
various scenarios. If you want to change or optimize Snappy, please run the
tests to verify you have not broken anything. Note that if you have the
Google Test library installed, unit test behavior (especially failures) will be
significantly more user-friendly. You can find Google Test at</p><p>  <a href="http://github.com/google/googletest" target="_blank" rel="noopener noreferrer">http://github.com/google/googletest</a></p><p>You probably also want the gflags library for handling of command-line flags;
you can find it at</p><p>  <a href="http://gflags.github.io/gflags/" target="_blank" rel="noopener noreferrer">http://gflags.github.io/gflags/</a></p><p>In addition to the unit tests, snappy contains microbenchmarks used to
tune compression and decompression performance. These are automatically run
before the unit tests, but you can disable them using the flag
--run_microbenchmarks=false if you have gflags installed (otherwise you will
need to edit the source).</p><p>Finally, snappy can benchmark Snappy against a few other compression libraries
(zlib, LZO, LZF, and QuickLZ), if they were detected at configure time.
To benchmark using a given file, give the compression algorithm you want to test
Snappy against (e.g. --zlib) and then a list of one or more file names on the
command line. The testdata/ directory contains the files used by the
microbenchmark, which should provide a reasonably balanced starting point for
benchmarking. (Note that baddata[1-3].snappy are not intended as benchmarks; they
are used to verify correctness in the presence of corrupted data in the unit
test.)</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="contact"></a>Contact<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contact" title="Direct link to heading">#</a></h1><p>Snappy is distributed through GitHub. For the latest version, a bug tracker,
and other information, see</p><p>  <a href="http://google.github.io/snappy/" target="_blank" rel="noopener noreferrer">http://google.github.io/snappy/</a></p><p>or the repository at</p><p>  <a href="https://github.com/google/snappy" target="_blank" rel="noopener noreferrer">https://github.com/google/snappy</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Conflux-Chain/conflux-developer-site/edit/master/docs/conflux-rust/core/benchmark/storage/parity-snappy/rust-snappy/snappy-sys/snappy/README.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-02-03T02:35:37.000Z" class="docLastUpdatedAt_2pXX">2/3/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_1Fsi"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/en/conflux_overview">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/conflux-portal/docs/en/portal/introduction">Portal</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://bounty.conflux-chain.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bounty</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Conflux-Chain" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/Conflux_Network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 Conflux Chain, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.553bd67d.js"></script>
<script src="/runtime~main.96399471.js"></script>
<script src="/main.19d3fa67.js"></script>
<script src="/1.940cd094.js"></script>
<script src="/2.c0143057.js"></script>
<script src="/71.00796953.js"></script>
<script src="/79.4fccfe13.js"></script>
<script src="/20ac7829.f718cc52.js"></script>
<script src="/4f4f5cb7.c9504f76.js"></script>
</body>
</html>