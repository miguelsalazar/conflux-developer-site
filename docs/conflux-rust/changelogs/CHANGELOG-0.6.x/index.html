<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<title data-react-helmet="true">CHANGELOG-0.6.x | Conflux</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="CHANGELOG-0.6.x | Conflux"><meta data-react-helmet="true" name="description" content="0.6.3"><meta data-react-helmet="true" property="og:description" content="0.6.3"><meta data-react-helmet="true" property="og:url" content="https://developer.conflux-chain.org/docs/conflux-rust/changelogs/CHANGELOG-0.6.x"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://developer.conflux-chain.org/docs/conflux-rust/changelogs/CHANGELOG-0.6.x"><link rel="stylesheet" href="/styles.82d27872.css">
<link rel="preload" href="/styles.3cee6932.js" as="script">
<link rel="preload" href="/runtime~main.6a5fa4e6.js" as="script">
<link rel="preload" href="/main.492f62dd.js" as="script">
<link rel="preload" href="/1.f4fe0d3f.js" as="script">
<link rel="preload" href="/2.5852d8a1.js" as="script">
<link rel="preload" href="/67.15fb8956.js" as="script">
<link rel="preload" href="/74.fdb1b67b.js" as="script">
<link rel="preload" href="/20ac7829.f718cc52.js" as="script">
<link rel="preload" href="/87517d28.502cc637.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Conflux Logo"><strong class="navbar__title">Conflux Developer</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Conflux-Chain/conflux-developer-site" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_KVdu"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_13On moon_3n_g"></span></div><div class="react-toggle-track-x"><span class="toggle_13On sun_UemI"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Conflux Logo"><strong class="navbar__title">Conflux Developer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/Conflux-Chain/conflux-developer-site" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_3T5V"><main class="docMainContainer_2yiU"><div class="container padding-vert--lg docItemWrapper_182k"><div class="row"><div class="col docItemCol_2uRP"><div class="docItemContainer_1gVo"><article><header><h1 class="docTitle_3r6L">CHANGELOG-0.6.x</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="063"></a>0.6.3<a aria-hidden="true" tabindex="-1" class="hash-link" href="#063" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="improvements"></a>Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#improvements" title="Direct link to heading">#</a></h2><ul><li><p>Block info returned by rpc methods <code>cfx_getBlockByEpochNumber</code>, <code>cfx_getBlockByHash</code>, <code>cfx_getBlockByHashWithPivotAssumption</code> add one new field <code>gasUsed</code> (backward compatible)</p></li><li><p>Revise <code>cfx_getStorageRoot</code> output. Now it always returns a JSON objects with three fields <code>&quot;delta&quot;</code>, <code>&quot;intermediate&quot;</code>, and <code>&quot;snapshot&quot;</code>. These fields are either <code>null</code>, <code>&quot;TOMBSTONE&quot;</code>, or a hash string (e.g. <code>&quot;0x0240a5a3486ac1cee71db22b8e12f1bb6ac9f207ecd81b06031c407663c20a94&quot;</code>).</p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="062"></a>0.6.2<a aria-hidden="true" tabindex="-1" class="hash-link" href="#062" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="improvement"></a>Improvement<a aria-hidden="true" tabindex="-1" class="hash-link" href="#improvement" title="Direct link to heading">#</a></h2><ul><li>Start stratum services automatically if <code>mining_author</code> is set.
Use <code>mining_type</code> to allow start CPU mining or disable mining manually.</li><li>Add rpc method <code>tx_inspect_pending</code> to help developer get their pending info.</li><li>Debug rpc <code>txpool_inspect</code> <code>txpool_content</code> <code>getTransactionsFromPool</code> add an optional parameter <code>address</code> to enable filter by account  </li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="060"></a>0.6.0<a aria-hidden="true" tabindex="-1" class="hash-link" href="#060" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="bug-fixes"></a>Bug Fixes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#bug-fixes" title="Direct link to heading">#</a></h2><ul><li><p>Fix inconsistent logics for TrackTouched.</p></li><li><p>Make sure all internal account exists at genesis block, otherwise some
readonly operation may crash.</p></li><li><p>Fix incorrect usages of require() in vm operations. In most cases creation of
basic account in its absense is undesired, especially when the address is a
contract. When a user account is to be created, the address space is checked.</p></li><li><p>Fix issue in processing snapshot chunk boundary which caused crash. The bug
was caused by a wrong assumption of the uniqueness of the trie proof key.</p></li><li><p>Fix incorrect receipt in refunding code collateral when contract suicides.</p></li><li><p>Fix crash when a contract suicides during creation.</p></li><li><p>Fix db error handling for EVM create / call.</p></li><li><p>Prevent crashes due to unchecked address space.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="incompatible-changes"></a>Incompatible Changes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#incompatible-changes" title="Direct link to heading">#</a></h2><ul><li><p>Change StorageValue serialization to reduce space.</p></li><li><p>Changed COMMISSION_PRIVILEGE_STORAGE_VALUE.</p></li><li><p>Remove address from Account rlp format, which was included unexpectedly
before.</p></li><li><p>Changed RewardInfo struct to add author info.</p></li><li><p>Invalid address in transaction execution will trigger an error. </p></li><li><p>The SELFDECONSTRUCT operation will fail if refund to invalid address.</p></li><li><p>Change the logic when reentrancy happens. (Message call with empty data and &lt;= 2300 gas is exempt from reentrancy check.)</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_25AA" id="improvements-1"></a>Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#improvements-1" title="Direct link to heading">#</a></h2><ul><li><p>Unify all public rpc with hex number, the following fields from RPC will be changed from decimal to hexadecimal:</p><ul><li>BlameInfo.blame</li><li>Block.blame</li><li>CallRequest.storageLimit</li><li>ConsensusGraphBlockState.blockStatus</li><li>EpochNumber::Num</li><li>Receipt.index</li><li>Receipt.epochNumber</li><li>Receipt.outcomeStatus</li><li>Status.pendingTxNumber</li><li>SyncGraphBlockState.timestamp</li></ul></li><li><p>Rename local rpc send_transaction with cfx_sendTransaction.</p></li><li><p>Improve the performance of the consensus layer for unstable TreeGraph scenarios. </p></li><li><p>Complete the protocol version mechanism for node communications and bump
the protocol version to V2. The change is backwards-compatible except for
msgid::THROTTLE (0xfe).</p></li><li><p>Add chain_id field into sync protocol and light protocol handshake message
so that peers can disconnect peers from another Conflux chain, e.g. testnet,
another testnet.</p></li><li><p>Keep network_id the same as chain_id. Setting network_id is only for local
experimental purposes.</p></li><li><p>Improve the transaction replacement rule in tx-pool: now a transaction can
replace one with same sender and nonce by higher gas-price or by same gas-price
and larger epoch height.</p></li><li><p>Change the nonce to 256 bits from 64 bits</p></li><li><p>Introduce nonce based lower bound in the PoW difficulty calculation. This
will help to defend against block withholding attack among mining pools in
future. With this change and careful PoW design, a mining pool can withhold
the top 128 bits of the nonce as the server nonce and the participants of
the pool will not be able to tell whether they mined a block or not.</p></li><li><p>Improve the stratum protocol to make it more consistent with the convention.
Now the stratum protocol can correctly work with an external miner.</p></li><li><p>Separate <code>deposit_list</code> and <code>vote_stake_list</code> from <code>Account</code> and adjust the gas cost for <code>withdraw</code>, <code>deposit</code>, <code>vote_lock</code> internal contract call. Now, the gas cost for there three functions is related with the length of <code>deposit_list</code> or <code>vote_stake_list</code>.</p></li><li><p>Disable transaction index persistence by default. This will reduce the disk usage
for miners. If you want to reliably serve transaction-related RPCs, you should
set <code>persist_tx_index=true</code> in the configuration file manually.</p></li><li><p>A new RPC ctx_getBlockRewardInfo to query block reward information inside a
given epoch.</p></li><li><p>Compute transaction root and receipts root by a simple MPT where the key is
the index in big endian bytes representation of fixed length with leading zero
and the value is the bytes representation of the corresponding data, e.g.
transaction hash for transaction root, Receipt rlp for block receipts root.
The receipts root is the Merkle root of the simple MPT of block receipts roots.</p></li><li><p>Use raw bytes in blame vec hash calculation instead of rlp because each
element of the vec is fixed length H256.</p></li><li><p>Add support for CHAINID, SELFBALANCE, BEGINSUB, JUMPSUB, RETURNSUB opcodes.</p></li><li><p>NUMBER opcode in call_virtual() now returns the correct block number.</p></li><li><p>BLOCKHASH opcode now returns the last block hash (i.e., <code>blockhash(block.number - 1)</code>)
or zero if not querying the last block hash.</p></li><li><p>Disable reentrancy of contract calling through other contracts. </p></li><li><p>Change the default value of <code>from_epoch</code> in RPC <code>cfx_getLogs</code> from &quot;earliest&quot; to &quot;latest_checkpoint&quot;.
Now if no <code>from_epoch</code> is specified, it will only return logs after the latest checkpoint.</p></li><li><p>Improve archive and full node log filtering. Change <code>filter.to_epoch</code> default to <code>&quot;latest_state&quot;</code>. Limit <code>filter.block_hashes</code> to up to 128 items.</p></li><li><p>Change internal contracts address to 0x088800...</p></li><li><p>Enable overflow-checks for release build, to make sure that underflow is
impossible.</p></li><li><p>Reduce the lock dependency between the transaction pool and the consensus engine to improve the performance.</p></li><li><p>Transaction pool will not start until the node finishes the catch-up. This
avoids inconsistent transaction pool issues during the catch up.</p></li><li><p>New cfx_clientVersion() rpc call to return a string with versions</p></li><li><p>Change CREATE/CREATE2 maximum code size from 24K to 48K</p></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Conflux-Chain/conflux-developer-site/edit/master/docs/conflux-rust/changelogs/CHANGELOG-0.6.x.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-12-09T02:21:06.000Z" class="docLastUpdatedAt_2pXX">12/9/2020</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_1Fsi"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#improvements" class="table-of-contents__link">Improvements</a></li><li><a href="#improvement" class="table-of-contents__link">Improvement</a></li><li><a href="#bug-fixes" class="table-of-contents__link">Bug Fixes</a></li><li><a href="#incompatible-changes" class="table-of-contents__link">Incompatible Changes</a></li><li><a href="#improvements-1" class="table-of-contents__link">Improvements</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/en/conflux_overview">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/conflux-portal/docs/en/portal/introduction">Portal</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://bounty.conflux-chain.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bounty</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Conflux-Chain" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/Conflux_Network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Conflux Chain, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.3cee6932.js"></script>
<script src="/runtime~main.6a5fa4e6.js"></script>
<script src="/main.492f62dd.js"></script>
<script src="/1.f4fe0d3f.js"></script>
<script src="/2.5852d8a1.js"></script>
<script src="/67.15fb8956.js"></script>
<script src="/74.fdb1b67b.js"></script>
<script src="/20ac7829.f718cc52.js"></script>
<script src="/87517d28.502cc637.js"></script>
</body>
</html>